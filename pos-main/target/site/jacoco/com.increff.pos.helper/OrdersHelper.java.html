<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>OrdersHelper.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">pos-main</a> &gt; <a href="index.source.html" class="el_package">com.increff.pos.helper</a> &gt; <span class="el_source">OrdersHelper.java</span></div><h1>OrdersHelper.java</h1><pre class="source lang-java linenums">package com.increff.pos.helper;

import com.increff.pos.exception.ApiException;
import com.increff.pos.model.data.OrderInvoiceData;
import com.increff.pos.model.data.OrderItemsData;
import com.increff.pos.model.data.OrdersData;
import com.increff.pos.model.form.OrderItemsForm;
import com.increff.pos.model.xml.OrderInvoiceXmlList;
import com.increff.pos.pojo.OrderItemsPojo;
import com.increff.pos.pojo.OrdersPojo;
import com.increff.pos.pojo.ProductPojo;

import java.time.ZoneId;
import java.time.ZonedDateTime;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

<span class="nc" id="L20">public class OrdersHelper {</span>
    public static OrdersPojo convertOrdersFormtoOrdersPojo() {
<span class="fc" id="L22">        OrdersPojo ordersPojo = new OrdersPojo();</span>
<span class="fc" id="L23">        ZonedDateTime date = ZonedDateTime.now(ZoneId.systemDefault());</span>
<span class="fc" id="L24">        ordersPojo.setTime(date);</span>
<span class="fc" id="L25">        ordersPojo.setStatus(&quot;Not Invoiced&quot;);</span>
<span class="fc" id="L26">        return ordersPojo;</span>
    }

    public static OrdersData convertOrdersPojoToOrdersData(OrdersPojo ordersPojo) throws ApiException {
<span class="fc" id="L30">        OrdersData ordersData = new OrdersData();</span>
<span class="fc" id="L31">        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm&quot;);</span>
<span class="fc" id="L32">        ordersData.setTime(ordersPojo.getTime().format(formatter));</span>
<span class="fc" id="L33">        ordersData.setId(ordersPojo.getId());</span>
<span class="fc" id="L34">        ordersData.setStatus(ordersPojo.getStatus());</span>
<span class="fc" id="L35">        return ordersData;</span>
    }

    public static OrderInvoiceXmlList convertToInvoiceDataList(List&lt;OrderItemsPojo&gt; orderItemPojoList, Map&lt;OrderItemsPojo, ProductPojo&gt; productPojoList, ZonedDateTime dateTime) {
<span class="fc" id="L39">        List&lt;OrderInvoiceData&gt; orderInvoiceDataList = new ArrayList&lt;&gt;();</span>
<span class="fc bfc" id="L40" title="All 2 branches covered.">        for (OrderItemsPojo orderItemPojo : orderItemPojoList) {</span>
<span class="fc" id="L41">            OrderInvoiceData orderInvoiceData = new OrderInvoiceData();</span>
<span class="fc" id="L42">            orderInvoiceData.setMrp(orderItemPojo.getSellingPrice());</span>
<span class="fc" id="L43">            orderInvoiceData.setName(productPojoList.get(orderItemPojo).getName());</span>
<span class="fc" id="L44">            orderInvoiceData.setQuantity(orderItemPojo.getQuantity());</span>
<span class="fc" id="L45">            orderInvoiceDataList.add(orderInvoiceData);</span>
<span class="fc" id="L46">        }</span>
<span class="fc" id="L47">        OrderInvoiceXmlList orderInvoiceXmlList = new OrderInvoiceXmlList();</span>
<span class="fc" id="L48">        orderInvoiceXmlList.setOrderInvoiceData(orderInvoiceDataList);</span>
<span class="fc" id="L49">        orderInvoiceXmlList.setOrder_id(orderItemPojoList.get(0).getOrderId());</span>
<span class="fc" id="L50">        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm&quot;);</span>
<span class="fc" id="L51">        orderInvoiceXmlList.setDatetime(dateTime.format(formatter));</span>
<span class="fc" id="L52">        double total = calculateTotal(orderInvoiceXmlList);</span>
<span class="fc" id="L53">        orderInvoiceXmlList.setTotal(total);</span>
<span class="fc" id="L54">        return orderInvoiceXmlList;</span>
    }

    private static double calculateTotal(OrderInvoiceXmlList orderInvoiceXmlList) {
<span class="fc" id="L58">        double total = 0;</span>
<span class="fc bfc" id="L59" title="All 2 branches covered.">        for (OrderInvoiceData orderInvoiceData : orderInvoiceXmlList.getOrderInvoiceData()) {</span>
<span class="fc" id="L60">            total += (orderInvoiceData.getMrp() * orderInvoiceData.getQuantity());</span>
<span class="fc" id="L61">        }</span>
<span class="fc" id="L62">        return total;</span>
    }

    public static OrderItemsPojo convertOrderItemsFormtoOrderItemsPojo(OrderItemsForm orderItemsForm) {
<span class="fc" id="L66">        OrderItemsPojo orderItemsPojo = new OrderItemsPojo();</span>
<span class="fc" id="L67">        orderItemsPojo.setSellingPrice(orderItemsForm.getSellingPrice());</span>
<span class="fc" id="L68">        orderItemsPojo.setQuantity(orderItemsForm.getQuantity());</span>
<span class="fc" id="L69">        orderItemsPojo.setOrderId(orderItemsForm.getOrderId());</span>
<span class="fc" id="L70">        return orderItemsPojo;</span>
    }

    public static OrderItemsData convertOrderItemsPojoToOrderItemsData(OrderItemsPojo orderItemsPojo, ProductPojo productPojo) {
<span class="fc" id="L74">        OrderItemsData orderItemsData = new OrderItemsData();</span>
<span class="fc" id="L75">        orderItemsData.setQuantity(orderItemsPojo.getQuantity());</span>
<span class="fc" id="L76">        orderItemsData.setSellingPrice(orderItemsPojo.getSellingPrice());</span>
<span class="fc" id="L77">        orderItemsData.setOrderId(orderItemsPojo.getOrderId());</span>
<span class="fc" id="L78">        orderItemsData.setId(orderItemsPojo.getId());</span>
<span class="fc" id="L79">        orderItemsData.setBarcode(productPojo.getBarcode());</span>
<span class="fc" id="L80">        orderItemsData.setProductName(productPojo.getName());</span>
<span class="fc" id="L81">        return orderItemsData;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>